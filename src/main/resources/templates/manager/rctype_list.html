<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <!-- Bootstrap Styles-->
    <link href="/assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="/assets/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <!-- Custom Styles-->
    <link href="/assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <script src="/webjars/jquery/3.3.0/jquery.js"></script>
    <!-- Bootstrap Js -->
    <script src="/assets/js/bootstrap.min.js"></script>
    <!--<script src="/webjars/bootstrap/4.1.1/js/bootstrap.js"></script>-->
    <!-- Metis Menu Js -->
    <script src="/assets/js/jquery.metisMenu.js"></script>

    <!-- Custom Js -->
    <script src="/assets/js/custom-scripts.js"></script>
</head>

<body >
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html"><i class="fa fa-gear"></i> <strong>HYBRID</strong></a>
            </div>

            <ul class="nav navbar-top-links navbar-right top_right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Doe</strong>
                                    <span class="pull-right text-muted">
                                        <em>Today</em>
                                    </span>
                                </div>
                                <div>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem Ipsum has been the industry's standard dummy text ever since an kwilnw...</div>
                            </a>
                        </li>

                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-tasks">
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 1</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (success)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>

                    </ul>
                    <!-- /.dropdown-tasks -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> New Comment
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Message Sent
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>

                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 min</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down  top_right"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
        </nav>
        <!--/. NAV TOP  -->
        <nav class="navbar-default navbar-side" role="navigation">
		<div id="sideNav" href=""><i class="fa fa-caret-right"></i></div>
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">

                    <li>
                        <a href="ui-elements.html"><i class="fa fa-desktop"></i>用餐单位</a>
                        <ul class="nav nav-second-level">
                            <li class="">
                                <a href="" th:href="@{/groupMealUnit/yes_list}">用餐单位列表<span class="fa "></span></a>
                            </li>
                            <li>
                                <a href="" th:href="@{/groupMealUnit/no_list}">未审核列表<span class="fa arrow"></span></a>
                            </li>

                        </ul>
                    </li>

                    <li >
                        <a href="#"><i class="fa fa-desktop"></i>团餐机构</a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href=""  th:href="@{/deliveringCompany/yes_list}" >团餐机构列表</a>
                            </li>

                            <li>
                                <a href="" th:href="@{/deliveringCompany/no_list}" >未审核列表</a>
                            </li>
                        </ul>
                    </li>
					<li class="active">
                        <a href=""><i class="fa fa-bar-chart-o"></i>菜系管理</a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="javascript:void(0);">菜谱类型列表</a>
                            </li>
                            <li>
                                <a href="" th:href="@{/mainCategorie/list}" >食材一级分类</a>
                            </li>
                            <li>
                                <a href="" th:href="@{/classification/list}" >食材二级分类</a>
                            </li>
                            <li>
                                <a href="" th:href="@{/foodMaterial/list/1}" >食材管理</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="tab-panel.html"><i class="fa fa-qrcode"></i> Tabs & Panels</a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href=""  th:href="@{/yes_list}" >列表</a>
                            </li>

                        </ul>
                    </li>
                    
                    <li>
                        <a href="table.html"><i class="fa fa-table"></i>权限设置</a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="#">设置团餐机构等级</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="form.html"><i class="fa fa-edit"></i> 处理投诉 </a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="#">投诉列表</a>
                            </li>
                            <li>
                                <a href="#">未处理列表</a>
                            </li>
                        </ul>
                    </li>


                    <li>
                        <a href="#"><i class="fa fa-sitemap"></i> 查询配送<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="#">xxxx</a>
                            </li>
                            <li>
                                <a href="#">xxx</a>
                            </li>
                            <li>
                                <a href="#">sanji<span class="fa arrow"></span></a>
                                <ul class="nav nav-third-level">
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>

                                </ul>

                            </li>
                        </ul>
                    </li>

                </ul>

            </div>

        </nav>
        <!-- /. NAV SIDE  -->


        <div id="page-wrapper">
            <div id="page-inner">
                <div class="row">
                    <div class="col-md-12">


						<ul class="breadcrumb" >
                            <i style="text-align: left">团餐机构列表</i>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">团餐机构</a></li>
                                <li class="active">团餐机构列表</li>

                        </ul>

                        <ul class="top_search">


                            <div class="container-fluid">


                                    <div class="span12">
                                     <div class="row-fluid">
                                         <form class="">
                                             按菜谱类型名称查询： <input class="input-medium search-query" type="text" id="typename"/>
                                             &nbsp;&nbsp;&nbsp;<button id="search" class="btn btn-primary" type="button">查询</button>
                                            <!--添加-->
                                             <button  data-toggle="modal" data-target="#myModal" id="add_type" type="button" class="btn btn-primary">添加</button>
                                             <!--<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" type="button">-->
                                                 <!--开始演示模态框-->
                                             <!--</button>-->
                                         </form>

                                    </div>
                                </div>
                            </div>
                        </ul>


                        <div class="text_data">
                            <div id="searchtable">
                            <table  class="table_shadow table table-bordered table-striped table-hover ">
                                <thead>
                                <tr>
                                    <th scope="">序号</th>
                                    <th  scope="" style="width: 200px">菜系名称</th>
                                    <th scope="">菜系简介</th>
                                    <th scope="">创建日期</th>
                                    <th scope="">操作</th>

                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="dc,stat : ${page.list}" th:if="${not #lists.isEmpty(page.list)}">
                                    <td th:text="${stat.count}"></td>
                                    <td class="zt"  th:text=" ${dc.recipeTypeName}"></td>
                                    <td th:text="${dc.recipeTypeDisc}">菜系简介</td>
                                    <td th:text="${#dates.format(dc.recipeTypeCreatedate,'yyyy-MM-dd HH:mm:ss')}">创建日期</td>
                                    <td>
                                        <button data-toggle="modal" data-target="#myModal" class="updatetype btn btn-xs btn-primary" th:onclick="'updatetype('+${dc.recipeTypeId}+',\''+${dc.recipeTypeName}+'\',\''+${dc.recipeTypeDisc}+'\')'" th:lang="${dc.recipeTypeId}"><i class="fa fa-edit "></i>&nbsp;修改&nbsp;</button>
                                        <!--&nbsp;&nbsp;<button data-toggle="modal" data-target="#deletetype"  class="dletetype btn btn-xs btn-danger" th:onclick="'deletetype('+${dc.recipeTypeId}+')'"  th:lang="${dc.recipeTypeId}"><i class="fas fa-trash-alt"></i>&nbsp;删除</button>-->

                                    </td>
                                </tr>
                                </tbody>

                            </table>

                            <!--分页栏位-->
                            <div th:include="manager/page::page"></div>

                            </div>

                        </div>
                    </div>
                </div>


            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
        <!--<div class="foot_div">-->
            <!--<p>Copyright &copy; 2016.Company name All rights reserved.More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>-->

        <!--</div>-->

    </div>

   <!-- 添加食谱类型的表单页面-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        添加食谱类型
                    </h4>
                </div>
                <div class="modal-body">
                    <form  role="form" id="formdata">
                        <input type="hidden" name="recipeTypeId" value="" id="typeId">
                        <div class="form-group">
                            <label>名称</label>
                            <input type="text" id="modal_name" name="recipeTypeName" class="form-control" placeholder="请输入名称">
                        </div>
                        <label >简介</label>
                        <div>
                            <input type="text" id="modal_desc" name="recipeTypeDisc" class="form-control" placeholder="请输入简介">

                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button id="confirm_commit" type="button" class="btn btn-primary">
                        提交
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>

    <!--删除食谱类型-->
    <div class="modal fade" id="deletetype" tabindex="-1" role="dialog" aria-labelledby="authorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close closedel" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="deleteModalLabel">
                        确认删除该食谱类型吗？
                    </h4>
                </div>
                <!--<div class="modal-body">

                </div>-->
                <div class="modal-footer">
                    <input type="hidden" name="recipeTypeId" value="" id="deltypeId">
                    <button type="button" class="btn btn-default closedel" data-dismiss="modal">关闭
                    </button>
                    <button id="confirm_del" type="button" class="btn btn-danger">
                        确认删除
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>

    <div class="modal fade" id="warning" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel1">
                        友情提示！不能为空
                    </h4>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">关闭
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>

    <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->
    <!--<script src="/assets/js/jquery-1.10.2.js"></script>-->


    <script type="text/javascript">

        /*搜索*/
        $('#search').click(function () {

            var typename=$("#typename").val();
            if(typename==null||typename==""){
                $('#warning').modal('show');
                return;
            }
            $.ajax({
                url:"/recipeType/search/"+typename,
                type:"POST",
                data:{
                    'asyc':true,
                },
                error:function (error) {
                    alert("网络错误");
                },
                success:function (result) {
                    //alert(result);
                    $("#searchtable").html(result);
                },
            });

        });


        function deletetype(id) {
            console.log(window.event.srcElement || window.event.target);
            var srcclick=window.event.srcElement || window.event.target;
            $(srcclick).addClass('rm');
            $('#deltypeId').val(id);

        }
        function updatetype(id,name,desc) {
            //alert(id+"+"+name+"+"+desc);
            $('#myModalLabel').text("更新食谱类型");
            $('#typeId').val(id);
            //var name=$updathis.parent().siblings().eq(1).text();
            //var des=$updathis.parent().siblings().eq(2).text();
            //console.log(name+"+"+des);
            $('#modal_name').val(name);
            $('#modal_desc').val(desc);
        };

        $(function () {
            var url=window.location.href;
            var arr=url.split("/");
            /*$.each(arr,function (index,value) {
                console.log(index+"==="+arr[index]);
            })*/
            if (arr.length==7){
                $("#typename").val(decodeURI(decodeURI(arr[5])));
            }
            /*添加或者更新*/
            $('#add_type').click(function () {

                $('#myModalLabel').text("添加食谱类型");
            });

            var typeid;

            //模态框完全对隐藏时触发。
            $('#myModal').on('hidden.bs.modal', function () {
                // 执行一些动作...
                $('#typeId').val('');
                $('#modal_name').val('');
                $('#modal_desc').val('');
            })
            $('#confirm_commit').click(function () {
                var name=$('#modal_name').val();
                if (name==""){
                    $('#warning').modal('show');
                    return;
                }
                var savedata=$('#formdata').serialize();
                //alert(savedata);
                $.ajax({
                    url:"/recipeType/save",
                    type:"POST",
                    data:savedata,
                    error:function (error) {
                        alert("网络错误");
                    },
                    success:function (result) {
                        //alert("ok");
                        $('#search').click();
                        $('#myModal').modal('hide');
                        // location.reload();

                    }
                });

            });

            /*删除*/
            $('.closedel').click(function () {
                $('.rm').removeClass('rm');
            });

            $('#confirm_del').click(function () {
                typeid=$('#deltypeId').val();

                $.ajax({
                    url:"/recipeType/delete/"+typeid,
                    type:"POST",
                    data:{},
                    error:function (error) {
                        alert("网络错误");
                    },
                    success:function (result) {
                        //location.reload();
                        $('.rm').parent().parent().hide();
                        $('#deletetype').modal('hide');
                    }
                });
            });
        });
    </script>
 

</body>

</html>